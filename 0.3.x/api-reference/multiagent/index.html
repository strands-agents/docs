
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
      <meta name="description" content="Documentation for Strands Agents, a simple-to-use, code-first, lightweight library for building AI agents">
    
    
    
      <link rel="canonical" href="https://strandsagents.com/latest/api-reference/multiagent/">
    
    
      <link rel="prev" href="../models/">
    
    
      <link rel="next" href="../session/">
    
    
    <link rel="icon" href="../../assets/logo-light.png" sizes="any">
    <link rel="icon" href="../../assets/logo-auto.svg" type="image/svg+xml">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">

    
      
        <title>Multiagent - Strands Agents SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--code:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5%203h2v2H5v5a2%202%200%200%201-2%202%202%202%200%200%201%202%202v5h2v2H5c-1.07-.27-2-.9-2-2v-4a2%202%200%200%200-2-2H0v-2h1a2%202%200%200%200%202-2V5a2%202%200%200%201%202-2m14%200a2%202%200%200%201%202%202v4a2%202%200%200%200%202%202h1v2h-1a2%202%200%200%200-2%202v4a2%202%200%200%201-2%202h-2v-2h2v-5a2%202%200%200%201%202-2%202%202%200%200%201-2-2V5h-2V3zm-7%2012a1%201%200%200%201%201%201%201%201%200%200%201-1%201%201%201%200%200%201-1-1%201%201%200%200%201%201-1m-4%200a1%201%200%200%201%201%201%201%201%200%200%201-1%201%201%201%200%200%201-1-1%201%201%200%200%201%201-1m8%200a1%201%200%200%201%201%201%201%201%200%200%201-1%201%201%201%200%200%201-1-1%201%201%200%200%201%201-1%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#strands.multiagent" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Strands Agents SDK" class="md-header__button md-logo" aria-label="Strands Agents SDK" data-md-component="logo">
      <!-- Logo -->

  <img src="../../assets/logo-light.svg" alt="logo" class="logo-light" />
  <img src="../../assets/logo-dark.svg" alt="logo" class="logo-dark" />

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Strands Agents SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multiagent
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/strands-agents/sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/strands-agents/sdk-python/blob/main/CONTRIBUTING.md" class="md-tabs__link">
        
  
  
    
  
  Contribute ❤️

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../agent/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Strands Agents SDK" class="md-nav__button md-logo" aria-label="Strands Agents SDK" data-md-component="logo">
      <!-- Logo -->

  <img src="../../assets/logo-light.svg" alt="logo" class="logo-light" />
  <img src="../../assets/logo-dark.svg" alt="logo" class="logo-dark" />

    </a>
    Strands Agents SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/strands-agents/sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_1" >
        
          
          <label class="md-nav__link" for="__nav_1_3_1" id="__nav_1_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_1">
            <span class="md-nav__icon md-icon"></span>
            Agents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/agent-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Loop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/session-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/structured-output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Structured Output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/agents/conversation-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conversation Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_2" >
        
          
          <label class="md-nav__link" for="__nav_1_3_2" id="__nav_1_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_2">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/tools/tools_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/tools/python-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/tools/mcp-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Context Protocol (MCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/tools/example-tools-package/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example Tools Package
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3_3" id="__nav_1_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Model Providers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_3">
            <span class="md-nav__icon md-icon"></span>
            Model Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/amazon-bedrock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon Bedrock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/anthropic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anthropic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/litellm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LiteLLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/llamaapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LlamaAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/mistral/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MistralAI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/ollama/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/openai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/sagemaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SageMaker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/writer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Writer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/cohere/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohere
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/model-providers/custom_model_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Providers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_4" >
        
          
          <label class="md-nav__link" for="__nav_1_3_4" id="__nav_1_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Streaming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_4">
            <span class="md-nav__icon md-icon"></span>
            Streaming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/streaming/async-iterators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Async Iterators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/streaming/callback-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callback Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_5" >
        
          
          <label class="md-nav__link" for="__nav_1_3_5" id="__nav_1_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Multi-agent
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_5">
            <span class="md-nav__icon md-icon"></span>
            Multi-agent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/multi-agent/agent-to-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent2Agent (A2A)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/multi-agent/agents-as-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents as Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/multi-agent/swarm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swarm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/multi-agent/graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/concepts/multi-agent/workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Safety & Security
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Safety & Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/safety-security/responsible-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Responsible AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/safety-security/guardrails/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guardrails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/safety-security/prompt-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompt Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/safety-security/pii-redaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII Redaction
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Observability & Evaluation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Observability & Evaluation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/observability-evaluation/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/observability-evaluation/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/observability-evaluation/traces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/observability-evaluation/logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/observability-evaluation/evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deploy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/operating-agents-in-production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operating Agents in Production
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/deploy_to_aws_lambda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Lambda
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/deploy_to_aws_fargate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Fargate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/deploy_to_bedrock_agentcore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon Bedrock AgentCore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/deploy_to_amazon_eks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon EKS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deploy/deploy_to_amazon_ec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon EC2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/cli-reference-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Reference Agent Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/weather_forecaster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Weather Forecaster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/memory_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/file_operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/agents_workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents Workflows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/knowledge_base_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knowledge-Base Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/structured_output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Structured Output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/multi_agent_example/multi_agent_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/meta_tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta Tooling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/mcp_calculator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/python/multimodal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-modal
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/strands-agents/sdk-python/blob/main/CONTRIBUTING.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribute ❤️
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../event-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event Loop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experimental
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Multiagent
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Multiagent
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase" class="md-nav__link">
    <span class="md-ellipsis">
      MultiAgentBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiAgentBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentResult" class="md-nav__link">
    <span class="md-ellipsis">
      MultiAgentResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.NodeResult" class="md-nav__link">
    <span class="md-ellipsis">
      NodeResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.NodeResult.get_agent_results" class="md-nav__link">
    <span class="md-ellipsis">
      get_agent_results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.Status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.graph" class="md-nav__link">
    <span class="md-ellipsis">
      graph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="graph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph" class="md-nav__link">
    <span class="md-ellipsis">
      Graph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      GraphBuilder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.add_edge" class="md-nav__link">
    <span class="md-ellipsis">
      add_edge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.add_node" class="md-nav__link">
    <span class="md-ellipsis">
      add_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.build" class="md-nav__link">
    <span class="md-ellipsis">
      build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.set_entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      set_entry_point
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge" class="md-nav__link">
    <span class="md-ellipsis">
      GraphEdge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphEdge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge.should_traverse" class="md-nav__link">
    <span class="md-ellipsis">
      should_traverse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode" class="md-nav__link">
    <span class="md-ellipsis">
      GraphNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphResult" class="md-nav__link">
    <span class="md-ellipsis">
      GraphResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphState" class="md-nav__link">
    <span class="md-ellipsis">
      GraphState
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.swarm" class="md-nav__link">
    <span class="md-ellipsis">
      swarm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="swarm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SharedContext" class="md-nav__link">
    <span class="md-ellipsis">
      SharedContext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SharedContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SharedContext.add_context" class="md-nav__link">
    <span class="md-ellipsis">
      add_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm" class="md-nav__link">
    <span class="md-ellipsis">
      Swarm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swarm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SwarmNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.reset_executor_state" class="md-nav__link">
    <span class="md-ellipsis">
      reset_executor_state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmResult" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmState" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SwarmState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmState.should_continue" class="md-nav__link">
    <span class="md-ellipsis">
      should_continue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.a2a" class="md-nav__link">
    <span class="md-ellipsis">
      a2a
    </span>
  </a>
  
    <nav class="md-nav" aria-label="a2a">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor" class="md-nav__link">
    <span class="md-ellipsis">
      executor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="executor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor" class="md-nav__link">
    <span class="md-ellipsis">
      StrandsA2AExecutor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StrandsA2AExecutor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.cancel" class="md-nav__link">
    <span class="md-ellipsis">
      cancel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer" class="md-nav__link">
    <span class="md-ellipsis">
      A2AServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A2AServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.agent_skills" class="md-nav__link">
    <span class="md-ellipsis">
      agent_skills
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.public_agent_card" class="md-nav__link">
    <span class="md-ellipsis">
      public_agent_card
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.serve" class="md-nav__link">
    <span class="md-ellipsis">
      serve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.to_fastapi_app" class="md-nav__link">
    <span class="md-ellipsis">
      to_fastapi_app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.to_starlette_app" class="md-nav__link">
    <span class="md-ellipsis">
      to_starlette_app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase" class="md-nav__link">
    <span class="md-ellipsis">
      MultiAgentBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiAgentBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentBase.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.MultiAgentResult" class="md-nav__link">
    <span class="md-ellipsis">
      MultiAgentResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.NodeResult" class="md-nav__link">
    <span class="md-ellipsis">
      NodeResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.NodeResult.get_agent_results" class="md-nav__link">
    <span class="md-ellipsis">
      get_agent_results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.base.Status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.graph" class="md-nav__link">
    <span class="md-ellipsis">
      graph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="graph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph" class="md-nav__link">
    <span class="md-ellipsis">
      Graph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.Graph.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      GraphBuilder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.add_edge" class="md-nav__link">
    <span class="md-ellipsis">
      add_edge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.add_node" class="md-nav__link">
    <span class="md-ellipsis">
      add_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.build" class="md-nav__link">
    <span class="md-ellipsis">
      build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphBuilder.set_entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      set_entry_point
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge" class="md-nav__link">
    <span class="md-ellipsis">
      GraphEdge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphEdge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphEdge.should_traverse" class="md-nav__link">
    <span class="md-ellipsis">
      should_traverse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode" class="md-nav__link">
    <span class="md-ellipsis">
      GraphNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GraphNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphNode.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphResult" class="md-nav__link">
    <span class="md-ellipsis">
      GraphResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.graph.GraphState" class="md-nav__link">
    <span class="md-ellipsis">
      GraphState
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.swarm" class="md-nav__link">
    <span class="md-ellipsis">
      swarm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="swarm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SharedContext" class="md-nav__link">
    <span class="md-ellipsis">
      SharedContext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SharedContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SharedContext.add_context" class="md-nav__link">
    <span class="md-ellipsis">
      add_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm" class="md-nav__link">
    <span class="md-ellipsis">
      Swarm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swarm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.Swarm.invoke_async" class="md-nav__link">
    <span class="md-ellipsis">
      invoke_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SwarmNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmNode.reset_executor_state" class="md-nav__link">
    <span class="md-ellipsis">
      reset_executor_state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmResult" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmState" class="md-nav__link">
    <span class="md-ellipsis">
      SwarmState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SwarmState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.swarm.SwarmState.should_continue" class="md-nav__link">
    <span class="md-ellipsis">
      should_continue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strands.multiagent.a2a" class="md-nav__link">
    <span class="md-ellipsis">
      a2a
    </span>
  </a>
  
    <nav class="md-nav" aria-label="a2a">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor" class="md-nav__link">
    <span class="md-ellipsis">
      executor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="executor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor" class="md-nav__link">
    <span class="md-ellipsis">
      StrandsA2AExecutor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StrandsA2AExecutor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.cancel" class="md-nav__link">
    <span class="md-ellipsis">
      cancel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer" class="md-nav__link">
    <span class="md-ellipsis">
      A2AServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A2AServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.agent_skills" class="md-nav__link">
    <span class="md-ellipsis">
      agent_skills
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.public_agent_card" class="md-nav__link">
    <span class="md-ellipsis">
      public_agent_card
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.serve" class="md-nav__link">
    <span class="md-ellipsis">
      serve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.to_fastapi_app" class="md-nav__link">
    <span class="md-ellipsis">
      to_fastapi_app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strands.multiagent.a2a.server.A2AServer.to_starlette_app" class="md-nav__link">
    <span class="md-ellipsis">
      to_starlette_app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="doc doc-object doc-module">



<h1 id="strands.multiagent" class="doc doc-heading">
            <code>strands.multiagent</code>


<a href="#strands.multiagent" class="headerlink" title="Permanent link">&para;</a></h1>

    <div class="doc doc-contents first">

        <p>Multiagent capabilities for Strands Agents.</p>
<p>This module provides support for multiagent systems, including agent-to-agent (A2A)
communication protocols and coordination mechanisms.</p>


<details class="submodules" open>
  <summary>Submodules</summary>
  <p>a2a: Implementation of the Agent-to-Agent (A2A) protocol, which enables
     standardized communication between agents.</p>
</details>








  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="strands.multiagent.base" class="doc doc-heading">
            <code>strands.multiagent.base</code>


<a href="#strands.multiagent.base" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Multi-Agent Base Class.</p>
<p>Provides minimal foundation for multi-agent patterns (Swarm, Graph).</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.base.MultiAgentBase" class="doc doc-heading">
            <code>MultiAgentBase</code>


<a href="#strands.multiagent.base.MultiAgentBase" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base class for multi-agent helpers.</p>
<p>This class integrates with existing Strands Agent instances and provides
multi-agent orchestration capabilities.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MultiAgentBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for multi-agent helpers.</span>

<span class="sd">    This class integrates with existing Strands Agent instances and provides</span>
<span class="sd">    multi-agent orchestration capabilities.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiAgentResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke asynchronously.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;invoke_async not implemented&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiAgentResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke synchronously.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;__call__ not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.base.MultiAgentBase.__call__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#strands.multiagent.base.MultiAgentBase.__call__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke synchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiAgentResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke synchronously.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;__call__ not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.base.MultiAgentBase.invoke_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#strands.multiagent.base.MultiAgentBase.invoke_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke asynchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiAgentResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke asynchronously.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;invoke_async not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.base.MultiAgentResult" class="doc doc-heading">
            <code>MultiAgentResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.base.MultiAgentResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Result from multi-agent execution with accumulated metrics.</p>
<p>The status field represents the outcome of the MultiAgentBase execution:
- COMPLETED: The execution was successfully accomplished
- FAILED: The execution failed or produced an error</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MultiAgentResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result from multi-agent execution with accumulated metrics.</span>

<span class="sd">    The status field represents the outcome of the MultiAgentBase execution:</span>
<span class="sd">    - COMPLETED: The execution was successfully accomplished</span>
<span class="sd">    - FAILED: The execution failed or produced an error</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NodeResult</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">{})</span>
    <span class="n">accumulated_usage</span><span class="p">:</span> <span class="n">Usage</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">accumulated_metrics</span><span class="p">:</span> <span class="n">Metrics</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">execution_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.base.NodeResult" class="doc doc-heading">
            <code>NodeResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.base.NodeResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Unified result from node execution - handles both Agent and nested MultiAgentBase results.</p>
<p>The status field represents the semantic outcome of the node's work:
- COMPLETED: The node's task was successfully accomplished
- FAILED: The node's task failed or produced an error</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NodeResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unified result from node execution - handles both Agent and nested MultiAgentBase results.</span>

<span class="sd">    The status field represents the semantic outcome of the node&#39;s work:</span>
<span class="sd">    - COMPLETED: The node&#39;s task was successfully accomplished</span>
<span class="sd">    - FAILED: The node&#39;s task failed or produced an error</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Core result data - single AgentResult, nested MultiAgentResult, or Exception</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AgentResult</span><span class="p">,</span> <span class="s2">&quot;MultiAgentResult&quot;</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]</span>

    <span class="c1"># Execution metadata</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span>

    <span class="c1"># Accumulated metrics from this node and all children</span>
    <span class="n">accumulated_usage</span><span class="p">:</span> <span class="n">Usage</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">accumulated_metrics</span><span class="p">:</span> <span class="n">Metrics</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">execution_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_agent_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all AgentResult objects from this node, flattened if nested.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>  <span class="c1"># No agent results for exceptions</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="n">AgentResult</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Flatten nested results from MultiAgentResult</span>
            <span class="n">flattened</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">nested_node_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">flattened</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nested_node_result</span><span class="o">.</span><span class="n">get_agent_results</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">flattened</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.base.NodeResult.get_agent_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_agent_results</span><span class="p">()</span></code>

<a href="#strands.multiagent.base.NodeResult.get_agent_results" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all AgentResult objects from this node, flattened if nested.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_agent_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all AgentResult objects from this node, flattened if nested.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>  <span class="c1"># No agent results for exceptions</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="n">AgentResult</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Flatten nested results from MultiAgentResult</span>
        <span class="n">flattened</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nested_node_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">flattened</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nested_node_result</span><span class="o">.</span><span class="n">get_agent_results</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">flattened</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.base.Status" class="doc doc-heading">
            <code>Status</code>


<a href="#strands.multiagent.base.Status" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Execution status for both graphs and nodes.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Status</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execution status for both graphs and nodes.&quot;&quot;&quot;</span>

    <span class="n">PENDING</span> <span class="o">=</span> <span class="s2">&quot;pending&quot;</span>
    <span class="n">EXECUTING</span> <span class="o">=</span> <span class="s2">&quot;executing&quot;</span>
    <span class="n">COMPLETED</span> <span class="o">=</span> <span class="s2">&quot;completed&quot;</span>
    <span class="n">FAILED</span> <span class="o">=</span> <span class="s2">&quot;failed&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="strands.multiagent.graph" class="doc doc-heading">
            <code>strands.multiagent.graph</code>


<a href="#strands.multiagent.graph" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Directed Acyclic Graph (DAG) Multi-Agent Pattern Implementation.</p>
<p>This module provides a deterministic DAG-based agent orchestration system where
agents or MultiAgentBase instances (like Swarm or Graph) are nodes in a graph,
executed according to edge dependencies, with output from one node passed as input
to connected nodes.</p>
<p>Key Features:
- Agents and MultiAgentBase instances (Swarm, Graph, etc.) as graph nodes
- Deterministic execution order based on DAG structure
- Output propagation along edges
- Topological sort for execution ordering
- Clear dependency management
- Supports nested graphs (Graph as a node in another Graph)</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.Graph" class="doc doc-heading">
            <code>Graph</code>


<a href="#strands.multiagent.graph.Graph" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="MultiAgentBase (strands.multiagent.base.MultiAgentBase)" href="#strands.multiagent.base.MultiAgentBase">MultiAgentBase</a></code></p>


        <p>Directed Acyclic Graph multi-agent orchestration.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">(</span><span class="n">MultiAgentBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Directed Acyclic Graph multi-agent orchestration.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">],</span> <span class="n">edges</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphEdge</span><span class="p">],</span> <span class="n">entry_points</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphNode</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize Graph.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Validate nodes for duplicate instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span> <span class="o">=</span> <span class="n">entry_points</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">GraphState</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span> <span class="o">=</span> <span class="n">get_tracer</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke the graph synchronously.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">))</span>

        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
            <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke the graph asynchronously.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;task=&lt;</span><span class="si">%s</span><span class="s2">&gt; | starting graph execution&quot;</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>

        <span class="c1"># Initialize state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">GraphState</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">,</span>
            <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
            <span class="n">total_nodes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">),</span>
            <span class="n">edges</span><span class="o">=</span><span class="p">[(</span><span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="p">)</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">],</span>
            <span class="n">entry_points</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">span</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">start_multiagent_span</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;graph&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">trace_api</span><span class="o">.</span><span class="n">use_span</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">end_on_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_graph</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;status=&lt;</span><span class="si">%s</span><span class="s2">&gt; | graph execution completed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;graph execution failed&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                <span class="k">raise</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_result</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate graph nodes for duplicate instances.&quot;&quot;&quot;</span>
        <span class="c1"># Check for duplicate node instances</span>
        <span class="n">seen_instances</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">)</span> <span class="ow">in</span> <span class="n">seen_instances</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Duplicate node instance detected. Each node must have a unique object instance.&quot;</span><span class="p">)</span>
            <span class="n">seen_instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">))</span>

            <span class="c1"># Validate Agent-specific constraints for each node</span>
            <span class="n">_validate_node_executor</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_execute_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unified execution flow with conditional routing.&quot;&quot;&quot;</span>
        <span class="n">ready_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">ready_nodes</span><span class="p">:</span>
            <span class="n">current_batch</span> <span class="o">=</span> <span class="n">ready_nodes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">ready_nodes</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="c1"># Execute current batch of ready nodes concurrently</span>
            <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execute_node</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">current_batch</span>
                <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span>
            <span class="p">]</span>

            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">task</span>

            <span class="c1"># Find newly ready nodes after batch execution</span>
            <span class="n">ready_nodes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_newly_ready_nodes</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_find_newly_ready_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find nodes that became ready after the last execution.&quot;&quot;&quot;</span>
        <span class="n">newly_ready</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span>
                <span class="ow">and</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">failed_nodes</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_node_ready_with_conditions</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">newly_ready</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newly_ready</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_is_node_ready_with_conditions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">GraphNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a node is ready considering conditional edges.&quot;&quot;&quot;</span>
        <span class="c1"># Get incoming edges to this node</span>
        <span class="n">incoming_edges</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span> <span class="o">==</span> <span class="n">node</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">incoming_edges</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span>

        <span class="c1"># Check if at least one incoming edge condition is satisfied</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">incoming_edges</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">should_traverse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;from=&lt;</span><span class="si">%s</span><span class="s2">&gt;, to=&lt;</span><span class="si">%s</span><span class="s2">&gt; | edge ready via satisfied condition&quot;</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;from=&lt;</span><span class="si">%s</span><span class="s2">&gt;, to=&lt;</span><span class="si">%s</span><span class="s2">&gt; | edge condition not satisfied&quot;</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span>
                    <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_execute_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">GraphNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute a single node with error handling.&quot;&quot;&quot;</span>
        <span class="n">node</span><span class="o">.</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;node_id=&lt;</span><span class="si">%s</span><span class="s2">&gt; | executing node&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Build node input from satisfied dependencies</span>
            <span class="n">node_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_node_input</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

            <span class="c1"># Execute based on node type and create unified NodeResult</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">,</span> <span class="n">MultiAgentBase</span><span class="p">):</span>
                <span class="n">multi_agent_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">node_input</span><span class="p">)</span>

                <span class="c1"># Create NodeResult with MultiAgentResult directly</span>
                <span class="n">node_result</span> <span class="o">=</span> <span class="n">NodeResult</span><span class="p">(</span>
                    <span class="n">result</span><span class="o">=</span><span class="n">multi_agent_result</span><span class="p">,</span>  <span class="c1"># type is MultiAgentResult</span>
                    <span class="n">execution_time</span><span class="o">=</span><span class="n">multi_agent_result</span><span class="o">.</span><span class="n">execution_time</span><span class="p">,</span>
                    <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span><span class="p">,</span>
                    <span class="n">accumulated_usage</span><span class="o">=</span><span class="n">multi_agent_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">,</span>
                    <span class="n">accumulated_metrics</span><span class="o">=</span><span class="n">multi_agent_result</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="p">,</span>
                    <span class="n">execution_count</span><span class="o">=</span><span class="n">multi_agent_result</span><span class="o">.</span><span class="n">execution_count</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">,</span> <span class="n">Agent</span><span class="p">):</span>
                <span class="n">agent_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">node_input</span><span class="p">)</span>

                <span class="c1"># Extract metrics from agent response</span>
                <span class="n">usage</span> <span class="o">=</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">metrics</span> <span class="o">=</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">agent_response</span><span class="p">,</span> <span class="s2">&quot;metrics&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent_response</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">agent_response</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span> <span class="s2">&quot;accumulated_usage&quot;</span><span class="p">):</span>
                        <span class="n">usage</span> <span class="o">=</span> <span class="n">agent_response</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">accumulated_usage</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">agent_response</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span> <span class="s2">&quot;accumulated_metrics&quot;</span><span class="p">):</span>
                        <span class="n">metrics</span> <span class="o">=</span> <span class="n">agent_response</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">accumulated_metrics</span>

                <span class="n">node_result</span> <span class="o">=</span> <span class="n">NodeResult</span><span class="p">(</span>
                    <span class="n">result</span><span class="o">=</span><span class="n">agent_response</span><span class="p">,</span>  <span class="c1"># type is AgentResult</span>
                    <span class="n">execution_time</span><span class="o">=</span><span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
                    <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span><span class="p">,</span>
                    <span class="n">accumulated_usage</span><span class="o">=</span><span class="n">usage</span><span class="p">,</span>
                    <span class="n">accumulated_metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">,</span>
                    <span class="n">execution_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node &#39;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; of type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; is not supported&quot;</span><span class="p">)</span>

            <span class="c1"># Mark as completed</span>
            <span class="n">node</span><span class="o">.</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span>
            <span class="n">node</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">node_result</span>
            <span class="n">node</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">execution_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_result</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

            <span class="c1"># Accumulate metrics</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_accumulate_metrics</span><span class="p">(</span><span class="n">node_result</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;node_id=&lt;</span><span class="si">%s</span><span class="s2">&gt;, execution_time=&lt;</span><span class="si">%d</span><span class="s2">ms&gt; | node completed successfully&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">execution_time</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;node_id=&lt;</span><span class="si">%s</span><span class="s2">&gt;, error=&lt;</span><span class="si">%s</span><span class="s2">&gt; | node failed&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

            <span class="c1"># Create a NodeResult for the failed node</span>
            <span class="n">node_result</span> <span class="o">=</span> <span class="n">NodeResult</span><span class="p">(</span>
                <span class="n">result</span><span class="o">=</span><span class="n">e</span><span class="p">,</span>  <span class="c1"># Store exception as result</span>
                <span class="n">execution_time</span><span class="o">=</span><span class="n">execution_time</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span>
                <span class="n">accumulated_usage</span><span class="o">=</span><span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                <span class="n">accumulated_metrics</span><span class="o">=</span><span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="n">execution_time</span><span class="p">),</span>
                <span class="n">execution_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">node</span><span class="o">.</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
            <span class="n">node</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">node_result</span>
            <span class="n">node</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="n">execution_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">failed_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_result</span>  <span class="c1"># Store in results for consistency</span>

            <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_accumulate_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_result</span><span class="p">:</span> <span class="n">NodeResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Accumulate metrics from a node result.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;inputTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inputTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;outputTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;outputTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;totalTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="p">[</span><span class="s2">&quot;latencyMs&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latencyMs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_count</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">execution_count</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_node_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">GraphNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build input text for a node based on dependency outputs.</span>

<span class="sd">        Example formatted output:</span>
<span class="sd">        ```</span>
<span class="sd">        Original Task: Analyze the quarterly sales data and create a summary report</span>

<span class="sd">        Inputs from previous nodes:</span>

<span class="sd">        From data_processor:</span>
<span class="sd">          - Agent: Sales data processed successfully. Found 1,247 transactions totaling $89,432.</span>
<span class="sd">          - Agent: Key trends: 15% increase in Q3, top product category is Electronics.</span>

<span class="sd">        From validator:</span>
<span class="sd">          - Agent: Data validation complete. All records verified, no anomalies detected.</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get satisfied dependencies</span>
        <span class="n">dependency_results</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span> <span class="o">==</span> <span class="n">node</span>
                <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span>
                <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">should_traverse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">):</span>
                    <span class="n">dependency_results</span><span class="p">[</span><span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">dependency_results</span><span class="p">:</span>
            <span class="c1"># No dependencies - return task as ContentBlocks</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span>

        <span class="c1"># Combine task with dependency outputs</span>
        <span class="n">node_input</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Add original task</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">node_input</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Original Task: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Add task content blocks with a prefix</span>
            <span class="n">node_input</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Original Task:&quot;</span><span class="p">))</span>
            <span class="n">node_input</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">)</span>

        <span class="c1"># Add dependency outputs</span>
        <span class="n">node_input</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Inputs from previous nodes:&quot;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">dep_id</span><span class="p">,</span> <span class="n">node_result</span> <span class="ow">in</span> <span class="n">dependency_results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">node_input</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">From </span><span class="si">{</span><span class="n">dep_id</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">))</span>
            <span class="c1"># Get all agent results from this node (flattened if nested)</span>
            <span class="n">agent_results</span> <span class="o">=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">get_agent_results</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">agent_results</span><span class="p">:</span>
                <span class="n">agent_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s2">&quot;agent_name&quot;</span><span class="p">,</span> <span class="s2">&quot;Agent&quot;</span><span class="p">)</span>
                <span class="n">result_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="n">node_input</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">agent_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">node_input</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build graph result from current state.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">GraphResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
            <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">,</span>
            <span class="n">accumulated_usage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">,</span>
            <span class="n">accumulated_metrics</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="p">,</span>
            <span class="n">execution_count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_count</span><span class="p">,</span>
            <span class="n">execution_time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span><span class="p">,</span>
            <span class="n">total_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">total_nodes</span><span class="p">,</span>
            <span class="n">completed_nodes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completed_nodes</span><span class="p">),</span>
            <span class="n">failed_nodes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">failed_nodes</span><span class="p">),</span>
            <span class="n">execution_order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_order</span><span class="p">,</span>
            <span class="n">edges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">edges</span><span class="p">,</span>
            <span class="n">entry_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">entry_points</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.Graph.__call__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.Graph.__call__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke the graph synchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke the graph synchronously.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.Graph.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">entry_points</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.Graph.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize Graph.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">],</span> <span class="n">edges</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphEdge</span><span class="p">],</span> <span class="n">entry_points</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphNode</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize Graph.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="c1"># Validate nodes for duplicate instances</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span> <span class="o">=</span> <span class="n">entry_points</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">GraphState</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span> <span class="o">=</span> <span class="n">get_tracer</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.Graph.invoke_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#strands.multiagent.graph.Graph.invoke_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke the graph asynchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke the graph asynchronously.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;task=&lt;</span><span class="si">%s</span><span class="s2">&gt; | starting graph execution&quot;</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>

    <span class="c1"># Initialize state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">GraphState</span><span class="p">(</span>
        <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">,</span>
        <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
        <span class="n">total_nodes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">),</span>
        <span class="n">edges</span><span class="o">=</span><span class="p">[(</span><span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="p">)</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">],</span>
        <span class="n">entry_points</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">span</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">start_multiagent_span</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;graph&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">trace_api</span><span class="o">.</span><span class="n">use_span</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">end_on_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_graph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;status=&lt;</span><span class="si">%s</span><span class="s2">&gt; | graph execution completed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;graph execution failed&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_result</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.GraphBuilder" class="doc doc-heading">
            <code>GraphBuilder</code>


<a href="#strands.multiagent.graph.GraphBuilder" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Builder pattern for constructing graphs.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GraphBuilder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Builder pattern for constructing graphs.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize GraphBuilder with empty collections.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphEdge</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphNode</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">executor</span><span class="p">:</span> <span class="n">Agent</span> <span class="o">|</span> <span class="n">MultiAgentBase</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphNode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an Agent or MultiAgentBase instance as a node to the graph.&quot;&quot;&quot;</span>
        <span class="n">_validate_node_executor</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>

        <span class="c1"># Auto-generate node_id if not provided</span>
        <span class="k">if</span> <span class="n">node_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;node_</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node &#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; already exists&quot;</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">GraphNode</span><span class="p">(</span><span class="n">node_id</span><span class="o">=</span><span class="n">node_id</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="n">executor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
        <span class="k">return</span> <span class="n">node</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_edge</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span>
        <span class="n">to_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span>
        <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">GraphState</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphEdge</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an edge between two nodes with optional condition function that receives full GraphState.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">resolve_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span> <span class="n">node_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphNode</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node_type</span><span class="si">}</span><span class="s2"> node &#39;</span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node_type</span><span class="si">}</span><span class="s2"> node object has not been added to the graph, use graph.add_node&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">node</span>

        <span class="n">from_node_obj</span> <span class="o">=</span> <span class="n">resolve_node</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="s2">&quot;Source&quot;</span><span class="p">)</span>
        <span class="n">to_node_obj</span> <span class="o">=</span> <span class="n">resolve_node</span><span class="p">(</span><span class="n">to_node</span><span class="p">,</span> <span class="s2">&quot;Target&quot;</span><span class="p">)</span>

        <span class="c1"># Add edge and update dependencies</span>
        <span class="n">edge</span> <span class="o">=</span> <span class="n">GraphEdge</span><span class="p">(</span><span class="n">from_node</span><span class="o">=</span><span class="n">from_node_obj</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">to_node_obj</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">condition</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
        <span class="n">to_node_obj</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">from_node_obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">edge</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GraphBuilder&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a node as an entry point for graph execution.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node &#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Graph&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build and validate the graph.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Graph must contain at least one node&quot;</span><span class="p">)</span>

        <span class="c1"># Auto-detect entry points if none specified</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span> <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">dependencies</span><span class="p">}</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;entry_points=&lt;</span><span class="si">%s</span><span class="s2">&gt; | auto-detected entrypoints&quot;</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No entry points found - all nodes have dependencies&quot;</span><span class="p">)</span>

        <span class="c1"># Validate entry points and check for cycles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">Graph</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">edges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">entry_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate graph structure and detect cycles.&quot;&quot;&quot;</span>
        <span class="c1"># Validate entry points exist</span>
        <span class="n">entry_point_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">}</span>
        <span class="n">invalid_entries</span> <span class="o">=</span> <span class="n">entry_point_ids</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">invalid_entries</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entry points not found in nodes: </span><span class="si">{</span><span class="n">invalid_entries</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check for cycles using DFS with color coding</span>
        <span class="n">WHITE</span><span class="p">,</span> <span class="n">GRAY</span><span class="p">,</span> <span class="n">BLACK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">{</span><span class="n">node_id</span><span class="p">:</span> <span class="n">WHITE</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">has_cycle_from</span><span class="p">(</span><span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">colors</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">GRAY</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Back edge found - cycle detected</span>
            <span class="k">if</span> <span class="n">colors</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">BLACK</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="n">colors</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">GRAY</span>
            <span class="c1"># Check all outgoing edges for cycles</span>
            <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span> <span class="o">==</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">has_cycle_from</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="n">colors</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">BLACK</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check for cycles from each unvisited node</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">WHITE</span> <span class="ow">and</span> <span class="n">has_cycle_from</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Graph contains cycles - must be a directed acyclic graph&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphBuilder.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#strands.multiagent.graph.GraphBuilder.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize GraphBuilder with empty collections.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize GraphBuilder with empty collections.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphEdge</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">GraphNode</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphBuilder.add_edge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.GraphBuilder.add_edge" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add an edge between two nodes with optional condition function that receives full GraphState.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_edge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span>
    <span class="n">to_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span>
    <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">GraphState</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphEdge</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an edge between two nodes with optional condition function that receives full GraphState.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">GraphNode</span><span class="p">,</span> <span class="n">node_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphNode</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node_type</span><span class="si">}</span><span class="s2"> node &#39;</span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node_type</span><span class="si">}</span><span class="s2"> node object has not been added to the graph, use graph.add_node&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">node</span>

    <span class="n">from_node_obj</span> <span class="o">=</span> <span class="n">resolve_node</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="s2">&quot;Source&quot;</span><span class="p">)</span>
    <span class="n">to_node_obj</span> <span class="o">=</span> <span class="n">resolve_node</span><span class="p">(</span><span class="n">to_node</span><span class="p">,</span> <span class="s2">&quot;Target&quot;</span><span class="p">)</span>

    <span class="c1"># Add edge and update dependencies</span>
    <span class="n">edge</span> <span class="o">=</span> <span class="n">GraphEdge</span><span class="p">(</span><span class="n">from_node</span><span class="o">=</span><span class="n">from_node_obj</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">to_node_obj</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">condition</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
    <span class="n">to_node_obj</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">from_node_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">edge</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphBuilder.add_node" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_node</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="n">node_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.GraphBuilder.add_node" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add an Agent or MultiAgentBase instance as a node to the graph.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">executor</span><span class="p">:</span> <span class="n">Agent</span> <span class="o">|</span> <span class="n">MultiAgentBase</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an Agent or MultiAgentBase instance as a node to the graph.&quot;&quot;&quot;</span>
    <span class="n">_validate_node_executor</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>

    <span class="c1"># Auto-generate node_id if not provided</span>
    <span class="k">if</span> <span class="n">node_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">node_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;node_</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node &#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; already exists&quot;</span><span class="p">)</span>

    <span class="n">node</span> <span class="o">=</span> <span class="n">GraphNode</span><span class="p">(</span><span class="n">node_id</span><span class="o">=</span><span class="n">node_id</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="n">executor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
    <span class="k">return</span> <span class="n">node</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphBuilder.build" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build</span><span class="p">()</span></code>

<a href="#strands.multiagent.graph.GraphBuilder.build" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Build and validate the graph.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Graph&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build and validate the graph.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Graph must contain at least one node&quot;</span><span class="p">)</span>

    <span class="c1"># Auto-detect entry points if none specified</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span> <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">dependencies</span><span class="p">}</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;entry_points=&lt;</span><span class="si">%s</span><span class="s2">&gt; | auto-detected entrypoints&quot;</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No entry points found - all nodes have dependencies&quot;</span><span class="p">)</span>

    <span class="c1"># Validate entry points and check for cycles</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">Graph</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">edges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">entry_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphBuilder.set_entry_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_entry_point</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.GraphBuilder.set_entry_point" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set a node as an entry point for graph execution.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GraphBuilder&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set a node as an entry point for graph execution.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node &#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry_points</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">])</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.GraphEdge" class="doc doc-heading">
            <code>GraphEdge</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.graph.GraphEdge" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an edge in the graph with an optional condition.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphEdge</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an edge in the graph with an optional condition.&quot;&quot;&quot;</span>

    <span class="n">from_node</span><span class="p">:</span> <span class="s2">&quot;GraphNode&quot;</span>
    <span class="n">to_node</span><span class="p">:</span> <span class="s2">&quot;GraphNode&quot;</span>
    <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">GraphState</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return hash for GraphEdge based on from_node and to_node.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">should_traverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">GraphState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if this edge should be traversed based on condition.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphEdge.__hash__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#strands.multiagent.graph.GraphEdge.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return hash for GraphEdge based on from_node and to_node.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return hash for GraphEdge based on from_node and to_node.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">from_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphEdge.should_traverse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">should_traverse</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.GraphEdge.should_traverse" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if this edge should be traversed based on condition.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_traverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">GraphState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if this edge should be traversed based on condition.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.GraphNode" class="doc doc-heading">
            <code>GraphNode</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.graph.GraphNode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a node in the graph.</p>
<p>The execution_status tracks the node's lifecycle within graph orchestration:
- PENDING: Node hasn't started executing yet
- EXECUTING: Node is currently running
- COMPLETED/FAILED: Node finished executing (regardless of result quality)</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a node in the graph.</span>

<span class="sd">    The execution_status tracks the node&#39;s lifecycle within graph orchestration:</span>
<span class="sd">    - PENDING: Node hasn&#39;t started executing yet</span>
<span class="sd">    - EXECUTING: Node is currently running</span>
<span class="sd">    - COMPLETED/FAILED: Node finished executing (regardless of result quality)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">executor</span><span class="p">:</span> <span class="n">Agent</span> <span class="o">|</span> <span class="n">MultiAgentBase</span>
    <span class="n">dependencies</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span><span class="p">)</span>
    <span class="n">execution_status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">NodeResult</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return hash for GraphNode based on node_id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return equality for GraphNode based on node_id.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">node_id</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphNode.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#strands.multiagent.graph.GraphNode.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return equality for GraphNode based on node_id.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return equality for GraphNode based on node_id.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">GraphNode</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">node_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.graph.GraphNode.__hash__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#strands.multiagent.graph.GraphNode.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return hash for GraphNode based on node_id.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return hash for GraphNode based on node_id.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.GraphResult" class="doc doc-heading">
            <code>GraphResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.graph.GraphResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="MultiAgentResult


  
      dataclass
   (strands.multiagent.base.MultiAgentResult)" href="#strands.multiagent.base.MultiAgentResult">MultiAgentResult</a></code></p>


        <p>Result from graph execution - extends MultiAgentResult with graph-specific details.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphResult</span><span class="p">(</span><span class="n">MultiAgentResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result from graph execution - extends MultiAgentResult with graph-specific details.&quot;&quot;&quot;</span>

    <span class="n">total_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">completed_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">failed_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">execution_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">,</span> <span class="s2">&quot;GraphNode&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">entry_points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.graph.GraphState" class="doc doc-heading">
            <code>GraphState</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.graph.GraphState" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Graph execution state.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.graph.GraphState.status">status</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Status (strands.multiagent.base.Status)" href="#strands.multiagent.base.Status">Status</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current execution status of the graph.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.graph.GraphState.completed_nodes">completed_nodes</span></code></td>
            <td>
                  <code><span title="set">set</span>[<a class="autorefs autorefs-internal" title="GraphNode


  
      dataclass
   (strands.multiagent.graph.GraphNode)" href="#strands.multiagent.graph.GraphNode">GraphNode</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of nodes that have completed execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.graph.GraphState.failed_nodes">failed_nodes</span></code></td>
            <td>
                  <code><span title="set">set</span>[<a class="autorefs autorefs-internal" title="GraphNode


  
      dataclass
   (strands.multiagent.graph.GraphNode)" href="#strands.multiagent.graph.GraphNode">GraphNode</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of nodes that failed during execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.graph.GraphState.execution_order">execution_order</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="GraphNode


  
      dataclass
   (strands.multiagent.graph.GraphNode)" href="#strands.multiagent.graph.GraphNode">GraphNode</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of nodes in the order they were executed.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.graph.GraphState.task">task</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<a class="autorefs autorefs-internal" title="ContentBlock (strands.types.content.ContentBlock)" href="../types/#strands.types.content.ContentBlock">ContentBlock</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original input prompt/query provided to the graph execution.
  This represents the actual work to be performed by the graph as a whole.
  Entry point nodes receive this task as their input if they have no dependencies.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Graph execution state.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        status: Current execution status of the graph.</span>
<span class="sd">        completed_nodes: Set of nodes that have completed execution.</span>
<span class="sd">        failed_nodes: Set of nodes that failed during execution.</span>
<span class="sd">        execution_order: List of nodes in the order they were executed.</span>
<span class="sd">        task: The original input prompt/query provided to the graph execution.</span>
<span class="sd">              This represents the actual work to be performed by the graph as a whole.</span>
<span class="sd">              Entry point nodes receive this task as their input if they have no dependencies.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Task (with default empty string)</span>
    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Execution state</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span>
    <span class="n">completed_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span><span class="p">)</span>
    <span class="n">failed_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span><span class="p">)</span>
    <span class="n">execution_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="c1"># Results</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NodeResult</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="c1"># Accumulated metrics</span>
    <span class="n">accumulated_usage</span><span class="p">:</span> <span class="n">Usage</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">accumulated_metrics</span><span class="p">:</span> <span class="n">Metrics</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">execution_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Graph structure info</span>
    <span class="n">total_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">,</span> <span class="s2">&quot;GraphNode&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">entry_points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;GraphNode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="strands.multiagent.swarm" class="doc doc-heading">
            <code>strands.multiagent.swarm</code>


<a href="#strands.multiagent.swarm" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Swarm Multi-Agent Pattern Implementation.</p>
<p>This module provides a collaborative agent orchestration system where
agents work together as a team to solve complex tasks, with shared context
and autonomous coordination.</p>
<p>Key Features:
- Self-organizing agent teams with shared working memory
- Tool-based coordination
- Autonomous agent collaboration without central control
- Dynamic task distribution based on agent capabilities
- Collective intelligence through shared context</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.swarm.SharedContext" class="doc doc-heading">
            <code>SharedContext</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.swarm.SharedContext" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Shared context between swarm nodes.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SharedContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shared context between swarm nodes.&quot;&quot;&quot;</span>

    <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">SwarmNode</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add context.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_json_serializable</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that a key is valid.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: The key to validate</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If key is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key cannot be None&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key must be a string&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key cannot be empty&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_json_serializable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that a value is JSON serializable.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to validate</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If value is not JSON serializable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value is not JSON serializable: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Only JSON-compatible types (str, int, float, bool, list, dict, None) are allowed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SharedContext.add_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_context</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#strands.multiagent.swarm.SharedContext.add_context" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add context.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">SwarmNode</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add context.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_json_serializable</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.swarm.Swarm" class="doc doc-heading">
            <code>Swarm</code>


<a href="#strands.multiagent.swarm.Swarm" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="MultiAgentBase (strands.multiagent.base.MultiAgentBase)" href="#strands.multiagent.base.MultiAgentBase">MultiAgentBase</a></code></p>


        <p>Self-organizing collaborative agent teams with shared working memory.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Swarm</span><span class="p">(</span><span class="n">MultiAgentBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Self-organizing collaborative agent teams with shared working memory.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Agent</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_handoffs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">execution_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">900.0</span><span class="p">,</span>
        <span class="n">node_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
        <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize Swarm with agents and configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            nodes: List of nodes (e.g. Agent) to include in the swarm</span>
<span class="sd">            max_handoffs: Maximum handoffs to agents and users (default: 20)</span>
<span class="sd">            max_iterations: Maximum node executions within the swarm (default: 20)</span>
<span class="sd">            execution_timeout: Total execution timeout in seconds (default: 900.0)</span>
<span class="sd">            node_timeout: Individual node timeout in seconds (default: 300.0)</span>
<span class="sd">            repetitive_handoff_detection_window: Number of recent nodes to check for repetitive handoffs</span>
<span class="sd">                Disabled by default (default: 0)</span>
<span class="sd">            repetitive_handoff_min_unique_agents: Minimum unique agents required in recent sequence</span>
<span class="sd">                Disabled by default (default: 0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">max_handoffs</span> <span class="o">=</span> <span class="n">max_handoffs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_timeout</span> <span class="o">=</span> <span class="n">execution_timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_timeout</span> <span class="o">=</span> <span class="n">node_timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_detection_window</span> <span class="o">=</span> <span class="n">repetitive_handoff_detection_window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_min_unique_agents</span> <span class="o">=</span> <span class="n">repetitive_handoff_min_unique_agents</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span> <span class="o">=</span> <span class="n">SharedContext</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SwarmNode</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SwarmState</span><span class="p">(</span>
            <span class="n">current_node</span><span class="o">=</span><span class="n">SwarmNode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">Agent</span><span class="p">()),</span>  <span class="c1"># Placeholder, will be set properly</span>
            <span class="n">task</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">completion_status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span> <span class="o">=</span> <span class="n">get_tracer</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_swarm</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inject_swarm_tools</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke the swarm synchronously.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">))</span>

        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
            <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke the swarm asynchronously.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;starting swarm execution&quot;</span><span class="p">)</span>

        <span class="c1"># Initialize swarm state with configuration</span>
        <span class="n">initial_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>  <span class="c1"># First SwarmNode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SwarmState</span><span class="p">(</span>
            <span class="n">current_node</span><span class="o">=</span><span class="n">initial_node</span><span class="p">,</span>
            <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
            <span class="n">completion_status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">,</span>
            <span class="n">shared_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">span</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">start_multiagent_span</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;swarm&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">trace_api</span><span class="o">.</span><span class="n">use_span</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">end_on_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;current_node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | starting swarm execution with node&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;max_handoffs=&lt;</span><span class="si">%d</span><span class="s2">&gt;, max_iterations=&lt;</span><span class="si">%d</span><span class="s2">&gt;, timeout=&lt;</span><span class="si">%s</span><span class="s2">&gt;s | swarm execution config&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">max_handoffs</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">execution_timeout</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_swarm</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;swarm execution failed&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                <span class="k">raise</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_result</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_setup_swarm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Agent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize swarm configuration.&quot;&quot;&quot;</span>
        <span class="c1"># Validate nodes before setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_swarm</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

        <span class="c1"># Validate agents have names and create SwarmNode objects</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">node_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;node_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">node_id</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;node_id=&lt;</span><span class="si">%s</span><span class="s2">&gt; | agent has no name, dynamically generating one&quot;</span><span class="p">,</span> <span class="n">node_id</span><span class="p">)</span>

            <span class="n">node_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="c1"># Ensure node IDs are unique</span>
            <span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node ID &#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; is not unique. Each agent must have a unique name.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">SwarmNode</span><span class="p">(</span><span class="n">node_id</span><span class="o">=</span><span class="n">node_id</span><span class="p">,</span> <span class="n">executor</span><span class="o">=</span><span class="n">node</span><span class="p">)</span>

        <span class="n">swarm_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;nodes=&lt;</span><span class="si">%s</span><span class="s2">&gt; | initialized swarm with nodes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">swarm_nodes</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_swarm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Agent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate swarm structure and nodes.&quot;&quot;&quot;</span>
        <span class="c1"># Check for duplicate object instances</span>
        <span class="n">seen_instances</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="ow">in</span> <span class="n">seen_instances</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Duplicate node instance detected. Each node must have a unique object instance.&quot;</span><span class="p">)</span>
            <span class="n">seen_instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>

            <span class="c1"># Check for session persistence</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_session_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Session persistence is not supported for Swarm agents yet.&quot;</span><span class="p">)</span>

            <span class="c1"># Check for callbacks</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hooks</span><span class="o">.</span><span class="n">has_callbacks</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Agent callbacks are not supported for Swarm agents yet.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_inject_swarm_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add swarm coordination tools to each agent.&quot;&quot;&quot;</span>
        <span class="c1"># Create tool functions with proper closures</span>
        <span class="n">swarm_tools</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_handoff_tool</span><span class="p">(),</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="c1"># Check for existing tools with conflicting names</span>
            <span class="n">existing_tools</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">tool_registry</span><span class="o">.</span><span class="n">registry</span>
            <span class="n">conflicting_tools</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="s2">&quot;handoff_to_agent&quot;</span> <span class="ow">in</span> <span class="n">existing_tools</span><span class="p">:</span>
                <span class="n">conflicting_tools</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;handoff_to_agent&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">conflicting_tools</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Agent &#39;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39; already has tools with names that conflict with swarm coordination tools: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conflicting_tools</span><span class="p">)</span><span class="si">}</span><span class="s2">. Please rename these tools to avoid conflicts.&quot;</span>
                <span class="p">)</span>

            <span class="c1"># Use the agent&#39;s tool registry to process and register the tools</span>
            <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">tool_registry</span><span class="o">.</span><span class="n">process_tools</span><span class="p">(</span><span class="n">swarm_tools</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;tool_count=&lt;</span><span class="si">%d</span><span class="s2">&gt;, node_count=&lt;</span><span class="si">%d</span><span class="s2">&gt; | injected coordination tools into agents&quot;</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">swarm_tools</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_handoff_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create handoff tool for agent coordination.&quot;&quot;&quot;</span>
        <span class="n">swarm_ref</span> <span class="o">=</span> <span class="bp">self</span>  <span class="c1"># Capture swarm reference</span>

        <span class="nd">@tool</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">handoff_to_agent</span><span class="p">(</span><span class="n">agent_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Transfer control to another agent in the swarm for specialized help.</span>

<span class="sd">            Args:</span>
<span class="sd">                agent_name: Name of the agent to hand off to</span>
<span class="sd">                message: Message explaining what needs to be done and why you&#39;re handing off</span>
<span class="sd">                context: Additional context to share with the next agent</span>

<span class="sd">            Returns:</span>
<span class="sd">                Confirmation of handoff initiation</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">context</span> <span class="o">=</span> <span class="n">context</span> <span class="ow">or</span> <span class="p">{}</span>

                <span class="c1"># Validate target agent exists</span>
                <span class="n">target_node</span> <span class="o">=</span> <span class="n">swarm_ref</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">agent_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">target_node</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Error: Agent &#39;</span><span class="si">{</span><span class="n">agent_name</span><span class="si">}</span><span class="s2">&#39; not found in swarm&quot;</span><span class="p">}]}</span>

                <span class="c1"># Execute handoff</span>
                <span class="n">swarm_ref</span><span class="o">.</span><span class="n">_handle_handoff</span><span class="p">(</span><span class="n">target_node</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Handed off to </span><span class="si">{</span><span class="n">agent_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}]}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Error in handoff: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}]}</span>

        <span class="k">return</span> <span class="n">handoff_to_agent</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_handoff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_node</span><span class="p">:</span> <span class="n">SwarmNode</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle handoff to another agent.&quot;&quot;&quot;</span>
        <span class="c1"># If task is already completed, don&#39;t allow further handoffs</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">!=</span> <span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;task_status=&lt;</span><span class="si">%s</span><span class="s2">&gt; | ignoring handoff request - task already completed&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Update swarm state</span>
        <span class="n">previous_agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span> <span class="o">=</span> <span class="n">target_node</span>

        <span class="c1"># Store handoff message for the target agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handoff_message</span> <span class="o">=</span> <span class="n">message</span>

        <span class="c1"># Store handoff context as shared context</span>
        <span class="k">if</span> <span class="n">context</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span><span class="o">.</span><span class="n">add_context</span><span class="p">(</span><span class="n">previous_agent</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;from_node=&lt;</span><span class="si">%s</span><span class="s2">&gt;, to_node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | handed off from agent to agent&quot;</span><span class="p">,</span>
            <span class="n">previous_agent</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span>
            <span class="n">target_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_node_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_node</span><span class="p">:</span> <span class="n">SwarmNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build input text for a node based on shared context and handoffs.</span>

<span class="sd">        Example formatted output:</span>
<span class="sd">        ```</span>
<span class="sd">        Handoff Message: The user needs help with Python debugging - I&#39;ve identified the issue but need someone with more expertise to fix it.</span>

<span class="sd">        User Request: My Python script is throwing a KeyError when processing JSON data from an API</span>

<span class="sd">        Previous agents who worked on this: data_analyst → code_reviewer</span>

<span class="sd">        Shared knowledge from previous agents:</span>
<span class="sd">        • data_analyst: {&quot;issue_location&quot;: &quot;line 42&quot;, &quot;error_type&quot;: &quot;missing key validation&quot;, &quot;suggested_fix&quot;: &quot;add key existence check&quot;}</span>
<span class="sd">        • code_reviewer: {&quot;code_quality&quot;: &quot;good overall structure&quot;, &quot;security_notes&quot;: &quot;API key should be in environment variable&quot;}</span>

<span class="sd">        Other agents available for collaboration:</span>
<span class="sd">        Agent name: data_analyst. Agent description: Analyzes data and provides deeper insights</span>
<span class="sd">        Agent name: code_reviewer.</span>
<span class="sd">        Agent name: security_specialist. Agent description: Focuses on secure coding practices and vulnerability assessment</span>

<span class="sd">        You have access to swarm coordination tools if you need help from other agents. If you don&#39;t hand off to another agent, the swarm will consider the task complete.</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
        <span class="n">context_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">,</span>
            <span class="s2">&quot;node_history&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="p">],</span>
            <span class="s2">&quot;shared_context&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
        <span class="p">}</span>
        <span class="n">context_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1"># Include handoff message prominently at the top if present</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handoff_message</span><span class="p">:</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Handoff Message: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handoff_message</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

        <span class="c1"># Include task information if available</span>
        <span class="k">if</span> <span class="s2">&quot;task&quot;</span> <span class="ow">in</span> <span class="n">context_info</span><span class="p">:</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">context_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;User Request: </span><span class="si">{</span><span class="n">task</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;User Request: Multi-modal task</span><span class="se">\n\n</span><span class="s2">&quot;</span>

        <span class="c1"># Include detailed node history</span>
        <span class="k">if</span> <span class="n">context_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_history&quot;</span><span class="p">):</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Previous agents who worked on this: </span><span class="si">{</span><span class="s1">&#39; → &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context_info</span><span class="p">[</span><span class="s1">&#39;node_history&#39;</span><span class="p">])</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

        <span class="c1"># Include actual shared context, not just a mention</span>
        <span class="n">shared_context</span> <span class="o">=</span> <span class="n">context_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shared_context&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">shared_context</span><span class="p">:</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;Shared knowledge from previous agents:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">shared_context</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">context</span><span class="p">:</span>  <span class="c1"># Only include if node has contributed context</span>
                    <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;• </span><span class="si">{</span><span class="n">node_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="c1"># Include available nodes with descriptions if available</span>
        <span class="n">other_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">node_id</span> <span class="o">!=</span> <span class="n">target_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">other_nodes</span><span class="p">:</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;Other agents available for collaboration:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">other_nodes</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
                <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Agent name: </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="k">if</span> <span class="n">node</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                    <span class="n">context_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; Agent description: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">context_text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="n">context_text</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s2">&quot;You have access to swarm coordination tools if you need help from other agents. &quot;</span>
            <span class="s2">&quot;If you don&#39;t hand off to another agent, the swarm will consider the task complete.&quot;</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">context_text</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_execute_swarm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shared execution logic used by execute_async.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Main execution loop</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">!=</span> <span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">:</span>
                    <span class="n">reason</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Completion status is: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;reason=&lt;</span><span class="si">%s</span><span class="s2">&gt; | stopping execution&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
                    <span class="k">break</span>

                <span class="n">should_continue</span><span class="p">,</span> <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">should_continue</span><span class="p">(</span>
                    <span class="n">max_handoffs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_handoffs</span><span class="p">,</span>
                    <span class="n">max_iterations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">,</span>
                    <span class="n">execution_timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution_timeout</span><span class="p">,</span>
                    <span class="n">repetitive_handoff_detection_window</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_detection_window</span><span class="p">,</span>
                    <span class="n">repetitive_handoff_min_unique_agents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_min_unique_agents</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">should_continue</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;reason=&lt;</span><span class="si">%s</span><span class="s2">&gt; | stopping execution&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
                    <span class="k">break</span>

                <span class="c1"># Get current node</span>
                <span class="n">current_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">current_node</span> <span class="ow">or</span> <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | node not found&quot;</span><span class="p">,</span> <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span> <span class="k">if</span> <span class="n">current_node</span> <span class="k">else</span> <span class="s2">&quot;None&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                    <span class="k">break</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;current_node=&lt;</span><span class="si">%s</span><span class="s2">&gt;, iteration=&lt;</span><span class="si">%d</span><span class="s2">&gt; | executing node&quot;</span><span class="p">,</span>
                    <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span>
                    <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="c1"># Execute node with timeout protection</span>
                <span class="c1"># TODO: Implement cancellation token to stop _execute_node from continuing</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_node</span><span class="p">(</span><span class="n">current_node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">task</span><span class="p">),</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">node_timeout</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_node</span><span class="p">)</span>

                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | node execution completed&quot;</span><span class="p">,</span> <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>

                    <span class="c1"># Check if the current node is still the same after execution</span>
                    <span class="c1"># If it is, then no handoff occurred and we consider the swarm complete</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span> <span class="o">==</span> <span class="n">current_node</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | no handoff occurred, marking swarm as complete&quot;</span><span class="p">,</span> <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span>
                        <span class="k">break</span>

                <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                        <span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt;, timeout=&lt;</span><span class="si">%s</span><span class="s2">&gt;s | node execution timed out after timeout&quot;</span><span class="p">,</span>
                        <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">node_timeout</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                    <span class="k">break</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | node execution failed&quot;</span><span class="p">,</span> <span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
                    <span class="k">break</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;swarm execution failed&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>

        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">start_time</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;status=&lt;</span><span class="si">%s</span><span class="s2">&gt; | swarm execution completed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;node_history_length=&lt;</span><span class="si">%d</span><span class="s2">&gt;, time=&lt;</span><span class="si">%s</span><span class="s2">&gt;s | metrics&quot;</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_execute_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">SwarmNode</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AgentResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute swarm node.&quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">node_name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">node_id</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Prepare context for node</span>
            <span class="n">context_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_node_input</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="n">node_input</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContentBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Context:</span><span class="se">\n</span><span class="si">{</span><span class="n">context_text</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)]</span>

            <span class="c1"># Clear handoff message after it&#39;s been included in context</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handoff_message</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="c1"># Include additional ContentBlocks in node input</span>
                <span class="n">node_input</span> <span class="o">=</span> <span class="n">node_input</span> <span class="o">+</span> <span class="n">task</span>

            <span class="c1"># Execute node</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">node</span><span class="o">.</span><span class="n">reset_executor_state</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">node</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">node_input</span><span class="p">)</span>

            <span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

            <span class="c1"># Create NodeResult</span>
            <span class="n">usage</span> <span class="o">=</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">metrics</span> <span class="o">=</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="n">execution_time</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s2">&quot;metrics&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span> <span class="s2">&quot;accumulated_usage&quot;</span><span class="p">):</span>
                    <span class="n">usage</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">accumulated_usage</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span> <span class="s2">&quot;accumulated_metrics&quot;</span><span class="p">):</span>
                    <span class="n">metrics</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">accumulated_metrics</span>

            <span class="n">node_result</span> <span class="o">=</span> <span class="n">NodeResult</span><span class="p">(</span>
                <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
                <span class="n">execution_time</span><span class="o">=</span><span class="n">execution_time</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COMPLETED</span><span class="p">,</span>
                <span class="n">accumulated_usage</span><span class="o">=</span><span class="n">usage</span><span class="p">,</span>
                <span class="n">accumulated_metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">,</span>
                <span class="n">execution_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Store result in state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">node_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_result</span>

            <span class="c1"># Accumulate metrics</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_accumulate_metrics</span><span class="p">(</span><span class="n">node_result</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | node execution failed&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>

            <span class="c1"># Create a NodeResult for the failed node</span>
            <span class="n">node_result</span> <span class="o">=</span> <span class="n">NodeResult</span><span class="p">(</span>
                <span class="n">result</span><span class="o">=</span><span class="n">e</span><span class="p">,</span>  <span class="c1"># Store exception as result</span>
                <span class="n">execution_time</span><span class="o">=</span><span class="n">execution_time</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span>
                <span class="n">accumulated_usage</span><span class="o">=</span><span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                <span class="n">accumulated_metrics</span><span class="o">=</span><span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="n">execution_time</span><span class="p">),</span>
                <span class="n">execution_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Store result in state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">node_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_result</span>

            <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_accumulate_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_result</span><span class="p">:</span> <span class="n">NodeResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Accumulate metrics from a node result.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;inputTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inputTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;outputTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;outputTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">[</span><span class="s2">&quot;totalTokens&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalTokens&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="p">[</span><span class="s2">&quot;latencyMs&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">node_result</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latencyMs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build swarm result from current state.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SwarmResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span><span class="p">,</span>
            <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">results</span><span class="p">,</span>
            <span class="n">accumulated_usage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_usage</span><span class="p">,</span>
            <span class="n">accumulated_metrics</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">accumulated_metrics</span><span class="p">,</span>
            <span class="n">execution_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="p">),</span>
            <span class="n">execution_time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span><span class="p">,</span>
            <span class="n">node_history</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">node_history</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.Swarm.__call__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#strands.multiagent.swarm.Swarm.__call__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke the swarm synchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke the swarm synchronously.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.Swarm.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_handoffs</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">execution_timeout</span><span class="o">=</span><span class="mf">900.0</span><span class="p">,</span> <span class="n">node_timeout</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="n">repetitive_handoff_detection_window</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">repetitive_handoff_min_unique_agents</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#strands.multiagent.swarm.Swarm.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize Swarm with agents and configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>nodes</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Agent (strands.agent.Agent)" href="../agent/#strands.agent.agent.Agent">Agent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of nodes (e.g. Agent) to include in the swarm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_handoffs</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum handoffs to agents and users (default: 20)</p>
              </div>
            </td>
            <td>
                  <code>20</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_iterations</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum node executions within the swarm (default: 20)</p>
              </div>
            </td>
            <td>
                  <code>20</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total execution timeout in seconds (default: 900.0)</p>
              </div>
            </td>
            <td>
                  <code>900.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>node_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Individual node timeout in seconds (default: 300.0)</p>
              </div>
            </td>
            <td>
                  <code>300.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>repetitive_handoff_detection_window</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of recent nodes to check for repetitive handoffs
Disabled by default (default: 0)</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>repetitive_handoff_min_unique_agents</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum unique agents required in recent sequence
Disabled by default (default: 0)</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Agent</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">max_handoffs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="n">execution_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">900.0</span><span class="p">,</span>
    <span class="n">node_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
    <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize Swarm with agents and configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        nodes: List of nodes (e.g. Agent) to include in the swarm</span>
<span class="sd">        max_handoffs: Maximum handoffs to agents and users (default: 20)</span>
<span class="sd">        max_iterations: Maximum node executions within the swarm (default: 20)</span>
<span class="sd">        execution_timeout: Total execution timeout in seconds (default: 900.0)</span>
<span class="sd">        node_timeout: Individual node timeout in seconds (default: 300.0)</span>
<span class="sd">        repetitive_handoff_detection_window: Number of recent nodes to check for repetitive handoffs</span>
<span class="sd">            Disabled by default (default: 0)</span>
<span class="sd">        repetitive_handoff_min_unique_agents: Minimum unique agents required in recent sequence</span>
<span class="sd">            Disabled by default (default: 0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_handoffs</span> <span class="o">=</span> <span class="n">max_handoffs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_timeout</span> <span class="o">=</span> <span class="n">execution_timeout</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_timeout</span> <span class="o">=</span> <span class="n">node_timeout</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_detection_window</span> <span class="o">=</span> <span class="n">repetitive_handoff_detection_window</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">repetitive_handoff_min_unique_agents</span> <span class="o">=</span> <span class="n">repetitive_handoff_min_unique_agents</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span> <span class="o">=</span> <span class="n">SharedContext</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SwarmNode</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SwarmState</span><span class="p">(</span>
        <span class="n">current_node</span><span class="o">=</span><span class="n">SwarmNode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">Agent</span><span class="p">()),</span>  <span class="c1"># Placeholder, will be set properly</span>
        <span class="n">task</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">completion_status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span> <span class="o">=</span> <span class="n">get_tracer</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_setup_swarm</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inject_swarm_tools</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.Swarm.invoke_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invoke_async</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#strands.multiagent.swarm.Swarm.invoke_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Invoke the swarm asynchronously.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invoke_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SwarmResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invoke the swarm asynchronously.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;starting swarm execution&quot;</span><span class="p">)</span>

    <span class="c1"># Initialize swarm state with configuration</span>
    <span class="n">initial_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>  <span class="c1"># First SwarmNode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SwarmState</span><span class="p">(</span>
        <span class="n">current_node</span><span class="o">=</span><span class="n">initial_node</span><span class="p">,</span>
        <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
        <span class="n">completion_status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">EXECUTING</span><span class="p">,</span>
        <span class="n">shared_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_context</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">span</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">start_multiagent_span</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;swarm&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">trace_api</span><span class="o">.</span><span class="n">use_span</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">end_on_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;current_node=&lt;</span><span class="si">%s</span><span class="s2">&gt; | starting swarm execution with node&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_node</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;max_handoffs=&lt;</span><span class="si">%d</span><span class="s2">&gt;, max_iterations=&lt;</span><span class="si">%d</span><span class="s2">&gt;, timeout=&lt;</span><span class="si">%s</span><span class="s2">&gt;s | swarm execution config&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">max_handoffs</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">execution_timeout</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_swarm</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;swarm execution failed&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">completion_status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">FAILED</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_result</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.swarm.SwarmNode" class="doc doc-heading">
            <code>SwarmNode</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.swarm.SwarmNode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a node (e.g. Agent) in the swarm.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SwarmNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a node (e.g. Agent) in the swarm.&quot;&quot;&quot;</span>

    <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">executor</span><span class="p">:</span> <span class="n">Agent</span>
    <span class="n">_initial_messages</span><span class="p">:</span> <span class="n">Messages</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_initial_state</span><span class="p">:</span> <span class="n">AgentState</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">AgentState</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Capture initial executor state after initialization.&quot;&quot;&quot;</span>
        <span class="c1"># Deep copy the initial messages and state to preserve them</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_messages</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_state</span> <span class="o">=</span> <span class="n">AgentState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return hash for SwarmNode based on node_id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return equality for SwarmNode based on node_id.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SwarmNode</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">node_id</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return string representation of SwarmNode.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return detailed representation of SwarmNode.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;SwarmNode(node_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_executor_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset SwarmNode executor state to initial state when swarm was created.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_messages</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">AgentState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_state</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return equality for SwarmNode based on node_id.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return equality for SwarmNode based on node_id.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SwarmNode</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">node_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.__hash__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return hash for SwarmNode based on node_id.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return hash for SwarmNode based on node_id.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.__post_init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Capture initial executor state after initialization.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Capture initial executor state after initialization.&quot;&quot;&quot;</span>
    <span class="c1"># Deep copy the initial messages and state to preserve them</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initial_messages</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initial_state</span> <span class="o">=</span> <span class="n">AgentState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return detailed representation of SwarmNode.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return detailed representation of SwarmNode.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;SwarmNode(node_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return string representation of SwarmNode.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return string representation of SwarmNode.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmNode.reset_executor_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_executor_state</span><span class="p">()</span></code>

<a href="#strands.multiagent.swarm.SwarmNode.reset_executor_state" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Reset SwarmNode executor state to initial state when swarm was created.</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_executor_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset SwarmNode executor state to initial state when swarm was created.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_messages</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">executor</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">AgentState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_state</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.swarm.SwarmResult" class="doc doc-heading">
            <code>SwarmResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.swarm.SwarmResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="MultiAgentResult


  
      dataclass
   (strands.multiagent.base.MultiAgentResult)" href="#strands.multiagent.base.MultiAgentResult">MultiAgentResult</a></code></p>


        <p>Result from swarm execution - extends MultiAgentResult with swarm-specific details.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SwarmResult</span><span class="p">(</span><span class="n">MultiAgentResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result from swarm execution - extends MultiAgentResult with swarm-specific details.&quot;&quot;&quot;</span>

    <span class="n">node_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SwarmNode</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="strands.multiagent.swarm.SwarmState" class="doc doc-heading">
            <code>SwarmState</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#strands.multiagent.swarm.SwarmState" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Current state of swarm execution.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SwarmState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Current state of swarm execution.&quot;&quot;&quot;</span>

    <span class="n">current_node</span><span class="p">:</span> <span class="n">SwarmNode</span>  <span class="c1"># The agent currently executing</span>
    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">]</span>  <span class="c1"># The original task from the user that is being executed</span>
    <span class="n">completion_status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">PENDING</span>  <span class="c1"># Current swarm execution status</span>
    <span class="n">shared_context</span><span class="p">:</span> <span class="n">SharedContext</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">SharedContext</span><span class="p">)</span>  <span class="c1"># Context shared between agents</span>
    <span class="n">node_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SwarmNode</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># Complete history of agents that have executed</span>
    <span class="n">start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>  <span class="c1"># When swarm execution began</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NodeResult</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>  <span class="c1"># Results from each agent execution</span>
    <span class="c1"># Total token usage across all agents</span>
    <span class="n">accumulated_usage</span><span class="p">:</span> <span class="n">Usage</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Usage</span><span class="p">(</span><span class="n">inputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outputTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">totalTokens</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="c1"># Total metrics across all agents</span>
    <span class="n">accumulated_metrics</span><span class="p">:</span> <span class="n">Metrics</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">latencyMs</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Total execution time in milliseconds</span>
    <span class="n">handoff_message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Message passed during agent handoff</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">should_continue</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_handoffs</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">execution_timeout</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the swarm should continue.</span>

<span class="sd">        Returns: (should_continue, reason)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check handoff limit</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_handoffs</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Max handoffs reached: </span><span class="si">{</span><span class="n">max_handoffs</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Check iteration limit</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_iterations</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Max iterations reached: </span><span class="si">{</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Check timeout</span>
        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span>
        <span class="k">if</span> <span class="n">elapsed</span> <span class="o">&gt;</span> <span class="n">execution_timeout</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Execution timed out: </span><span class="si">{</span><span class="n">execution_timeout</span><span class="si">}</span><span class="s2">s&quot;</span>

        <span class="c1"># Check for repetitive handoffs (agents passing back and forth)</span>
        <span class="k">if</span> <span class="n">repetitive_handoff_detection_window</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span>
            <span class="n">recent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">[</span><span class="o">-</span><span class="n">repetitive_handoff_detection_window</span><span class="p">:]</span>
            <span class="n">unique_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">recent</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">unique_nodes</span> <span class="o">&lt;</span> <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="kc">False</span><span class="p">,</span>
                    <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Repetitive handoff: </span><span class="si">{</span><span class="n">unique_nodes</span><span class="si">}</span><span class="s2"> unique nodes &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;out of </span><span class="si">{</span><span class="n">repetitive_handoff_detection_window</span><span class="si">}</span><span class="s2"> recent iterations&quot;</span>
                    <span class="p">),</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;Continuing&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="strands.multiagent.swarm.SwarmState.should_continue" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">should_continue</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">max_handoffs</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">,</span> <span class="n">execution_timeout</span><span class="p">,</span> <span class="n">repetitive_handoff_detection_window</span><span class="p">,</span> <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">)</span></code>

<a href="#strands.multiagent.swarm.SwarmState.should_continue" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the swarm should continue.</p>
<p>Returns: (should_continue, reason)</p>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/swarm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_continue</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">max_handoffs</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">execution_timeout</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the swarm should continue.</span>

<span class="sd">    Returns: (should_continue, reason)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check handoff limit</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_handoffs</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Max handoffs reached: </span><span class="si">{</span><span class="n">max_handoffs</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Check iteration limit</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_iterations</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Max iterations reached: </span><span class="si">{</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Check timeout</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span>
    <span class="k">if</span> <span class="n">elapsed</span> <span class="o">&gt;</span> <span class="n">execution_timeout</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Execution timed out: </span><span class="si">{</span><span class="n">execution_timeout</span><span class="si">}</span><span class="s2">s&quot;</span>

    <span class="c1"># Check for repetitive handoffs (agents passing back and forth)</span>
    <span class="k">if</span> <span class="n">repetitive_handoff_detection_window</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">repetitive_handoff_detection_window</span><span class="p">:</span>
        <span class="n">recent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_history</span><span class="p">[</span><span class="o">-</span><span class="n">repetitive_handoff_detection_window</span><span class="p">:]</span>
        <span class="n">unique_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">recent</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">unique_nodes</span> <span class="o">&lt;</span> <span class="n">repetitive_handoff_min_unique_agents</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="kc">False</span><span class="p">,</span>
                <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Repetitive handoff: </span><span class="si">{</span><span class="n">unique_nodes</span><span class="si">}</span><span class="s2"> unique nodes &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;out of </span><span class="si">{</span><span class="n">repetitive_handoff_detection_window</span><span class="si">}</span><span class="s2"> recent iterations&quot;</span>
                <span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;Continuing&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="strands.multiagent.a2a" class="doc doc-heading">
            <code>strands.multiagent.a2a</code>


<a href="#strands.multiagent.a2a" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Agent-to-Agent (A2A) communication protocol implementation for Strands Agents.</p>
<p>This module provides classes and utilities for enabling Strands Agents to communicate
with other agents using the Agent-to-Agent (A2A) protocol.</p>
<p>Docs: https://google-a2a.github.io/A2A/latest/</p>


<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="strands.multiagent.a2a.A2AAgent">A2AAgent</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>A wrapper that adapts a Strands Agent to be A2A-compatible.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="strands.multiagent.a2a.executor" class="doc doc-heading">
            <code>strands.multiagent.a2a.executor</code>


<a href="#strands.multiagent.a2a.executor" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents first">

        <p>Strands Agent executor for the A2A protocol.</p>
<p>This module provides the StrandsA2AExecutor class, which adapts a Strands Agent
to be used as an executor in the A2A protocol. It handles the execution of agent
requests and the conversion of Strands Agent streamed responses to A2A events.</p>
<p>The A2A AgentExecutor ensures clients receive responses for synchronous and
streamed requests to the A2AServer.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="strands.multiagent.a2a.executor.StrandsA2AExecutor" class="doc doc-heading">
            <code>StrandsA2AExecutor</code>


<a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="a2a.server.agent_execution.AgentExecutor">AgentExecutor</span></code></p>


        <p>Executor that adapts a Strands Agent to the A2A protocol.</p>
<p>This executor uses streaming mode to handle the execution of agent requests
and converts Strands Agent responses to A2A protocol events.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/a2a/executor.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StrandsA2AExecutor</span><span class="p">(</span><span class="n">AgentExecutor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executor that adapts a Strands Agent to the A2A protocol.</span>

<span class="sd">    This executor uses streaming mode to handle the execution of agent requests</span>
<span class="sd">    and converts Strands Agent responses to A2A protocol events.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">SAAgent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a StrandsA2AExecutor.</span>

<span class="sd">        Args:</span>
<span class="sd">            agent: The Strands Agent instance to adapt to the A2A protocol.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">agent</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span>
        <span class="n">event_queue</span><span class="p">:</span> <span class="n">EventQueue</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute a request using the Strands Agent and send the response as A2A events.</span>

<span class="sd">        This method executes the user&#39;s input using the Strands Agent in streaming mode</span>
<span class="sd">        and converts the agent&#39;s response to A2A events.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: The A2A request context, containing the user&#39;s input and task metadata.</span>
<span class="sd">            event_queue: The A2A event queue used to send response events back to the client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ServerError: If an error occurs during agent execution</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">current_task</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="p">:</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">new_task</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">await</span> <span class="n">event_queue</span><span class="o">.</span><span class="n">enqueue_event</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="n">updater</span> <span class="o">=</span> <span class="n">TaskUpdater</span><span class="p">(</span><span class="n">event_queue</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">contextId</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_streaming</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">updater</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ServerError</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">InternalError</span><span class="p">())</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_execute_streaming</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">updater</span><span class="p">:</span> <span class="n">TaskUpdater</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute request in streaming mode.</span>

<span class="sd">        Streams the agent&#39;s response in real-time, sending incremental updates</span>
<span class="sd">        as they become available from the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: The A2A request context, containing the user&#39;s input and other metadata.</span>
<span class="sd">            updater: The task updater for managing task state and sending updates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing request in streaming mode&quot;</span><span class="p">)</span>
        <span class="n">user_input</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get_user_input</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">stream_async</span><span class="p">(</span><span class="n">user_input</span><span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_streaming_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">updater</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error in streaming execution&quot;</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_handle_streaming_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">updater</span><span class="p">:</span> <span class="n">TaskUpdater</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a single streaming event from the Strands Agent.</span>

<span class="sd">        Processes streaming events from the agent, converting data chunks to A2A</span>
<span class="sd">        task updates and handling the final result when streaming is complete.</span>

<span class="sd">        Args:</span>
<span class="sd">            event: The streaming event from the agent, containing either &#39;data&#39; for</span>
<span class="sd">                incremental content or &#39;result&#39; for the final response.</span>
<span class="sd">            updater: The task updater for managing task state and sending updates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Streaming event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;data&quot;</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text_content</span> <span class="o">:=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]:</span>
                <span class="k">await</span> <span class="n">updater</span><span class="o">.</span><span class="n">update_status</span><span class="p">(</span>
                    <span class="n">TaskState</span><span class="o">.</span><span class="n">working</span><span class="p">,</span>
                    <span class="n">new_agent_text_message</span><span class="p">(</span>
                        <span class="n">text_content</span><span class="p">,</span>
                        <span class="n">updater</span><span class="o">.</span><span class="n">context_id</span><span class="p">,</span>
                        <span class="n">updater</span><span class="o">.</span><span class="n">task_id</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;result&quot;</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_agent_result</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">],</span> <span class="n">updater</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_handle_agent_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">SAAgentResult</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">updater</span><span class="p">:</span> <span class="n">TaskUpdater</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the final result from the Strands Agent.</span>

<span class="sd">        Processes the agent&#39;s final result, extracts text content from the response,</span>
<span class="sd">        and adds it as an artifact to the task before marking the task as complete.</span>

<span class="sd">        Args:</span>
<span class="sd">            result: The agent result object containing the final response, or None if no result.</span>
<span class="sd">            updater: The task updater for managing task state and adding the final artifact.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">final_content</span> <span class="o">:=</span> <span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
            <span class="k">await</span> <span class="n">updater</span><span class="o">.</span><span class="n">add_artifact</span><span class="p">(</span>
                <span class="p">[</span><span class="n">Part</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="n">TextPart</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">final_content</span><span class="p">))],</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;agent_response&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">await</span> <span class="n">updater</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">event_queue</span><span class="p">:</span> <span class="n">EventQueue</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel an ongoing execution.</span>

<span class="sd">        This method is called when a request cancellation is requested. Currently,</span>
<span class="sd">        cancellation is not supported by the Strands Agent executor, so this method</span>
<span class="sd">        always raises an UnsupportedOperationError.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: The A2A request context.</span>
<span class="sd">            event_queue: The A2A event queue.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ServerError: Always raised with an UnsupportedOperationError, as cancellation</span>
<span class="sd">                is not currently supported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Cancellation requested but not supported&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">ServerError</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">UnsupportedOperationError</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.executor.StrandsA2AExecutor.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span></code>

<a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Initialize a StrandsA2AExecutor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>agent</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Agent (strands.agent.agent.Agent)" href="../agent/#strands.agent.agent.Agent">Agent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Strands Agent instance to adapt to the A2A protocol.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/executor.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">SAAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a StrandsA2AExecutor.</span>

<span class="sd">    Args:</span>
<span class="sd">        agent: The Strands Agent instance to adapt to the A2A protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">agent</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.executor.StrandsA2AExecutor.cancel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cancel</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">event_queue</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.cancel" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Cancel an ongoing execution.</p>
<p>This method is called when a request cancellation is requested. Currently,
cancellation is not supported by the Strands Agent executor, so this method
always raises an UnsupportedOperationError.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="a2a.server.agent_execution.RequestContext">RequestContext</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The A2A request context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>event_queue</code>
            </td>
            <td>
                  <code><span title="a2a.server.events.EventQueue">EventQueue</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The A2A event queue.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="a2a.utils.errors.ServerError">ServerError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always raised with an UnsupportedOperationError, as cancellation
is not currently supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/executor.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">event_queue</span><span class="p">:</span> <span class="n">EventQueue</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cancel an ongoing execution.</span>

<span class="sd">    This method is called when a request cancellation is requested. Currently,</span>
<span class="sd">    cancellation is not supported by the Strands Agent executor, so this method</span>
<span class="sd">    always raises an UnsupportedOperationError.</span>

<span class="sd">    Args:</span>
<span class="sd">        context: The A2A request context.</span>
<span class="sd">        event_queue: The A2A event queue.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerError: Always raised with an UnsupportedOperationError, as cancellation</span>
<span class="sd">            is not currently supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Cancellation requested but not supported&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">ServerError</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">UnsupportedOperationError</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.executor.StrandsA2AExecutor.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">event_queue</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#strands.multiagent.a2a.executor.StrandsA2AExecutor.execute" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Execute a request using the Strands Agent and send the response as A2A events.</p>
<p>This method executes the user's input using the Strands Agent in streaming mode
and converts the agent's response to A2A events.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="a2a.server.agent_execution.RequestContext">RequestContext</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The A2A request context, containing the user's input and task metadata.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>event_queue</code>
            </td>
            <td>
                  <code><span title="a2a.server.events.EventQueue">EventQueue</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The A2A event queue used to send response events back to the client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="a2a.utils.errors.ServerError">ServerError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs during agent execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/executor.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span>
    <span class="n">event_queue</span><span class="p">:</span> <span class="n">EventQueue</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute a request using the Strands Agent and send the response as A2A events.</span>

<span class="sd">    This method executes the user&#39;s input using the Strands Agent in streaming mode</span>
<span class="sd">    and converts the agent&#39;s response to A2A events.</span>

<span class="sd">    Args:</span>
<span class="sd">        context: The A2A request context, containing the user&#39;s input and task metadata.</span>
<span class="sd">        event_queue: The A2A event queue used to send response events back to the client.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerError: If an error occurs during agent execution</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">current_task</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="p">:</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">new_task</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">await</span> <span class="n">event_queue</span><span class="o">.</span><span class="n">enqueue_event</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

    <span class="n">updater</span> <span class="o">=</span> <span class="n">TaskUpdater</span><span class="p">(</span><span class="n">event_queue</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">contextId</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_streaming</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">updater</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerError</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">InternalError</span><span class="p">())</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="strands.multiagent.a2a.server" class="doc doc-heading">
            <code>strands.multiagent.a2a.server</code>


<a href="#strands.multiagent.a2a.server" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents first">

        <p>A2A-compatible wrapper for Strands Agent.</p>
<p>This module provides the A2AAgent class, which adapts a Strands Agent to the A2A protocol,
allowing it to be used in A2A-compatible systems.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="strands.multiagent.a2a.server.A2AServer" class="doc doc-heading">
            <code>A2AServer</code>


<a href="#strands.multiagent.a2a.server.A2AServer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">


        <p>A2A-compatible wrapper for Strands Agent.</p>







              <details class="quote">
                <summary>Source code in <code>strands/multiagent/a2a/server.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">A2AServer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A2A-compatible wrapper for Strands Agent.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">agent</span><span class="p">:</span> <span class="n">SAAgent</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="c1"># AgentCard</span>
        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9000</span><span class="p">,</span>
        <span class="n">http_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">serve_at_root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
        <span class="n">skills</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentSkill</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an A2A-compatible server from a Strands agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            agent: The Strands Agent to wrap with A2A compatibility.</span>
<span class="sd">            host: The hostname or IP address to bind the A2A server to. Defaults to &quot;0.0.0.0&quot;.</span>
<span class="sd">            port: The port to bind the A2A server to. Defaults to 9000.</span>
<span class="sd">            http_url: The public HTTP URL where this agent will be accessible. If provided,</span>
<span class="sd">                this overrides the generated URL from host/port and enables automatic</span>
<span class="sd">                path-based mounting for load balancer scenarios.</span>
<span class="sd">                Example: &quot;http://my-alb.amazonaws.com/agent1&quot;</span>
<span class="sd">            serve_at_root: If True, forces the server to serve at root path regardless of</span>
<span class="sd">                http_url path component. Use this when your load balancer strips path prefixes.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            version: The version of the agent. Defaults to &quot;0.0.1&quot;.</span>
<span class="sd">            skills: The list of capabilities or functions the agent can perform.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>

        <span class="k">if</span> <span class="n">http_url</span><span class="p">:</span>
            <span class="c1"># Parse the provided URL to extract components for mounting</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_public_url</span><span class="p">(</span><span class="n">http_url</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">http_url</span> <span class="o">=</span> <span class="n">http_url</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span>

            <span class="c1"># Override mount path if serve_at_root is requested</span>
            <span class="k">if</span> <span class="n">serve_at_root</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fall back to constructing the URL from host and port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">http_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span><span class="si">}</span><span class="s2">/&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span> <span class="o">=</span> <span class="n">agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="o">.</span><span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="n">AgentCapabilities</span><span class="p">(</span><span class="n">streaming</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span> <span class="o">=</span> <span class="n">DefaultRequestHandler</span><span class="p">(</span>
            <span class="n">agent_executor</span><span class="o">=</span><span class="n">StrandsA2AExecutor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="p">),</span>
            <span class="n">task_store</span><span class="o">=</span><span class="n">InMemoryTaskStore</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_agent_skills</span> <span class="o">=</span> <span class="n">skills</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Strands&#39; integration with A2A is experimental. Be aware of frequent breaking changes.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_public_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the public URL into base URL and mount path components.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The full public URL (e.g., &quot;http://my-alb.amazonaws.com/agent1&quot;)</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: (base_url, mount_path) where base_url is the scheme+netloc</span>
<span class="sd">                  and mount_path is the path component</span>

<span class="sd">        Example:</span>
<span class="sd">            _parse_public_url(&quot;http://my-alb.amazonaws.com/agent1&quot;)</span>
<span class="sd">            Returns: (&quot;http://my-alb.amazonaws.com&quot;, &quot;/agent1&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>
        <span class="n">base_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="si">}</span><span class="s2">://</span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">mount_path</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">path</span> <span class="k">if</span> <span class="n">parsed</span><span class="o">.</span><span class="n">path</span> <span class="o">!=</span> <span class="s2">&quot;/&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">mount_path</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">public_agent_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AgentCard</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the public AgentCard for this agent.</span>

<span class="sd">        The AgentCard contains metadata about the agent, including its name,</span>
<span class="sd">        description, URL, version, skills, and capabilities. This information</span>
<span class="sd">        is used by other agents and systems to discover and interact with this agent.</span>

<span class="sd">        Returns:</span>
<span class="sd">            AgentCard: The public agent card containing metadata about this agent.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If name or description is None or empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A2A agent name cannot be None or empty&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A2A agent description cannot be None or empty&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">AgentCard</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">http_url</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="n">skills</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">agent_skills</span><span class="p">,</span>
            <span class="n">default_input_modes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">default_output_modes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">capabilities</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_skills_from_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentSkill</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of skills from Strands agent tools.</span>

<span class="sd">        Skills represent specific capabilities that the agent can perform.</span>
<span class="sd">        Strands agent tools are adapted to A2A skills.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[AgentSkill]: A list of skills this agent provides.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">AgentSkill</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="nb">id</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span> <span class="n">tags</span><span class="o">=</span><span class="p">[])</span>
            <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="o">.</span><span class="n">tool_registry</span><span class="o">.</span><span class="n">get_all_tools_config</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">agent_skills</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentSkill</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of skills this agent provides.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agent_skills</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agent_skills</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_skills_from_tools</span><span class="p">()</span>

    <span class="nd">@agent_skills</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">agent_skills</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skills</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentSkill</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the list of skills this agent provides.</span>

<span class="sd">        Args:</span>
<span class="sd">            skills: A list of AgentSkill objects to set for this agent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_agent_skills</span> <span class="o">=</span> <span class="n">skills</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_starlette_app</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Starlette</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a Starlette application for serving this agent via HTTP.</span>

<span class="sd">        Automatically handles path-based mounting if a mount path was derived</span>
<span class="sd">        from the http_url parameter.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Starlette: A Starlette application configured to serve this agent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a2a_app</span> <span class="o">=</span> <span class="n">A2AStarletteApplication</span><span class="p">(</span><span class="n">agent_card</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">public_agent_card</span><span class="p">,</span> <span class="n">http_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">:</span>
            <span class="c1"># Create parent app and mount the A2A app at the specified path</span>
            <span class="n">parent_app</span> <span class="o">=</span> <span class="n">Starlette</span><span class="p">()</span>
            <span class="n">parent_app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">,</span> <span class="n">a2a_app</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mounting A2A server at path: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parent_app</span>

        <span class="k">return</span> <span class="n">a2a_app</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_fastapi_app</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FastAPI</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a FastAPI application for serving this agent via HTTP.</span>

<span class="sd">        Automatically handles path-based mounting if a mount path was derived</span>
<span class="sd">        from the http_url parameter.</span>

<span class="sd">        Returns:</span>
<span class="sd">            FastAPI: A FastAPI application configured to serve this agent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a2a_app</span> <span class="o">=</span> <span class="n">A2AFastAPIApplication</span><span class="p">(</span><span class="n">agent_card</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">public_agent_card</span><span class="p">,</span> <span class="n">http_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">:</span>
            <span class="c1"># Create parent app and mount the A2A app at the specified path</span>
            <span class="n">parent_app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
            <span class="n">parent_app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">,</span> <span class="n">a2a_app</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mounting A2A server at path: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parent_app</span>

        <span class="k">return</span> <span class="n">a2a_app</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">serve</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">app_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fastapi&quot;</span><span class="p">,</span> <span class="s2">&quot;starlette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;starlette&quot;</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the A2A server with the specified application type.</span>

<span class="sd">        This method starts an HTTP server that exposes the agent via the A2A protocol.</span>
<span class="sd">        The server can be implemented using either FastAPI or Starlette, depending on</span>
<span class="sd">        the specified app_type.</span>

<span class="sd">        Args:</span>
<span class="sd">            app_type: The type of application to serve, either &quot;fastapi&quot; or &quot;starlette&quot;.</span>
<span class="sd">                Defaults to &quot;starlette&quot;.</span>
<span class="sd">            host: The host address to bind the server to. Defaults to &quot;0.0.0.0&quot;.</span>
<span class="sd">            port: The port number to bind the server to. Defaults to 9000.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to uvicorn.run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting Strands A2A server...&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">app_type</span> <span class="o">==</span> <span class="s2">&quot;fastapi&quot;</span><span class="p">:</span>
                <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_fastapi_app</span><span class="p">(),</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_starlette_app</span><span class="p">(),</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Strands A2A server shutdown requested (KeyboardInterrupt).&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Strands A2A server encountered exception.&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Strands A2A server has shutdown.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="strands.multiagent.a2a.server.A2AServer.agent_skills" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">agent_skills</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

<a href="#strands.multiagent.a2a.server.A2AServer.agent_skills" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Get the list of skills this agent provides.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="strands.multiagent.a2a.server.A2AServer.public_agent_card" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">public_agent_card</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#strands.multiagent.a2a.server.A2AServer.public_agent_card" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Get the public AgentCard for this agent.</p>
<p>The AgentCard contains metadata about the agent, including its name,
description, URL, version, skills, and capabilities. This information
is used by other agents and systems to discover and interact with this agent.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AgentCard</code></td>            <td>
                  <code><span title="a2a.types.AgentCard">AgentCard</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The public agent card containing metadata about this agent.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If name or description is None or empty.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.server.A2AServer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">9000</span><span class="p">,</span> <span class="n">http_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">serve_at_root</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="n">skills</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#strands.multiagent.a2a.server.A2AServer.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Initialize an A2A-compatible server from a Strands agent.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>agent</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Agent (strands.agent.agent.Agent)" href="../agent/#strands.agent.agent.Agent">Agent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Strands Agent to wrap with A2A compatibility.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>host</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hostname or IP address to bind the A2A server to. Defaults to "0.0.0.0".</p>
              </div>
            </td>
            <td>
                  <code>&#39;0.0.0.0&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>port</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The port to bind the A2A server to. Defaults to 9000.</p>
              </div>
            </td>
            <td>
                  <code>9000</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>http_url</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The public HTTP URL where this agent will be accessible. If provided,
this overrides the generated URL from host/port and enables automatic
path-based mounting for load balancer scenarios.
Example: "http://my-alb.amazonaws.com/agent1"</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>serve_at_root</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, forces the server to serve at root path regardless of
http_url path component. Use this when your load balancer strips path prefixes.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>version</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The version of the agent. Defaults to "0.0.1".</p>
              </div>
            </td>
            <td>
                  <code>&#39;0.0.1&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skills</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="a2a.types.AgentSkill">AgentSkill</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of capabilities or functions the agent can perform.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">agent</span><span class="p">:</span> <span class="n">SAAgent</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="c1"># AgentCard</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9000</span><span class="p">,</span>
    <span class="n">http_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">serve_at_root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
    <span class="n">skills</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AgentSkill</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize an A2A-compatible server from a Strands agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        agent: The Strands Agent to wrap with A2A compatibility.</span>
<span class="sd">        host: The hostname or IP address to bind the A2A server to. Defaults to &quot;0.0.0.0&quot;.</span>
<span class="sd">        port: The port to bind the A2A server to. Defaults to 9000.</span>
<span class="sd">        http_url: The public HTTP URL where this agent will be accessible. If provided,</span>
<span class="sd">            this overrides the generated URL from host/port and enables automatic</span>
<span class="sd">            path-based mounting for load balancer scenarios.</span>
<span class="sd">            Example: &quot;http://my-alb.amazonaws.com/agent1&quot;</span>
<span class="sd">        serve_at_root: If True, forces the server to serve at root path regardless of</span>
<span class="sd">            http_url path component. Use this when your load balancer strips path prefixes.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        version: The version of the agent. Defaults to &quot;0.0.1&quot;.</span>
<span class="sd">        skills: The list of capabilities or functions the agent can perform.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>

    <span class="k">if</span> <span class="n">http_url</span><span class="p">:</span>
        <span class="c1"># Parse the provided URL to extract components for mounting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_public_url</span><span class="p">(</span><span class="n">http_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http_url</span> <span class="o">=</span> <span class="n">http_url</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span>

        <span class="c1"># Override mount path if serve_at_root is requested</span>
        <span class="k">if</span> <span class="n">serve_at_root</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Fall back to constructing the URL from host and port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">public_base_url</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span> <span class="o">=</span> <span class="n">agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="o">.</span><span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="o">.</span><span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="n">AgentCapabilities</span><span class="p">(</span><span class="n">streaming</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span> <span class="o">=</span> <span class="n">DefaultRequestHandler</span><span class="p">(</span>
        <span class="n">agent_executor</span><span class="o">=</span><span class="n">StrandsA2AExecutor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">strands_agent</span><span class="p">),</span>
        <span class="n">task_store</span><span class="o">=</span><span class="n">InMemoryTaskStore</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_agent_skills</span> <span class="o">=</span> <span class="n">skills</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Strands&#39; integration with A2A is experimental. Be aware of frequent breaking changes.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.server.A2AServer.serve" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">serve</span><span class="p">(</span><span class="n">app_type</span><span class="o">=</span><span class="s1">&#39;starlette&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#strands.multiagent.a2a.server.A2AServer.serve" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Start the A2A server with the specified application type.</p>
<p>This method starts an HTTP server that exposes the agent via the A2A protocol.
The server can be implemented using either FastAPI or Starlette, depending on
the specified app_type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>app_type</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;fastapi&#39;, &#39;starlette&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of application to serve, either "fastapi" or "starlette".
Defaults to "starlette".</p>
              </div>
            </td>
            <td>
                  <code>&#39;starlette&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>host</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The host address to bind the server to. Defaults to "0.0.0.0".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>port</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The port number to bind the server to. Defaults to 9000.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to uvicorn.run.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">serve</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">app_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fastapi&quot;</span><span class="p">,</span> <span class="s2">&quot;starlette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;starlette&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the A2A server with the specified application type.</span>

<span class="sd">    This method starts an HTTP server that exposes the agent via the A2A protocol.</span>
<span class="sd">    The server can be implemented using either FastAPI or Starlette, depending on</span>
<span class="sd">    the specified app_type.</span>

<span class="sd">    Args:</span>
<span class="sd">        app_type: The type of application to serve, either &quot;fastapi&quot; or &quot;starlette&quot;.</span>
<span class="sd">            Defaults to &quot;starlette&quot;.</span>
<span class="sd">        host: The host address to bind the server to. Defaults to &quot;0.0.0.0&quot;.</span>
<span class="sd">        port: The port number to bind the server to. Defaults to 9000.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to uvicorn.run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting Strands A2A server...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">app_type</span> <span class="o">==</span> <span class="s2">&quot;fastapi&quot;</span><span class="p">:</span>
            <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_fastapi_app</span><span class="p">(),</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_starlette_app</span><span class="p">(),</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Strands A2A server shutdown requested (KeyboardInterrupt).&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Strands A2A server encountered exception.&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Strands A2A server has shutdown.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.server.A2AServer.to_fastapi_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_fastapi_app</span><span class="p">()</span></code>

<a href="#strands.multiagent.a2a.server.A2AServer.to_fastapi_app" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Create a FastAPI application for serving this agent via HTTP.</p>
<p>Automatically handles path-based mounting if a mount path was derived
from the http_url parameter.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>FastAPI</code></td>            <td>
                  <code><span title="fastapi.FastAPI">FastAPI</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A FastAPI application configured to serve this agent.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_fastapi_app</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FastAPI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a FastAPI application for serving this agent via HTTP.</span>

<span class="sd">    Automatically handles path-based mounting if a mount path was derived</span>
<span class="sd">    from the http_url parameter.</span>

<span class="sd">    Returns:</span>
<span class="sd">        FastAPI: A FastAPI application configured to serve this agent.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a2a_app</span> <span class="o">=</span> <span class="n">A2AFastAPIApplication</span><span class="p">(</span><span class="n">agent_card</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">public_agent_card</span><span class="p">,</span> <span class="n">http_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">:</span>
        <span class="c1"># Create parent app and mount the A2A app at the specified path</span>
        <span class="n">parent_app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
        <span class="n">parent_app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">,</span> <span class="n">a2a_app</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mounting A2A server at path: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parent_app</span>

    <span class="k">return</span> <span class="n">a2a_app</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="strands.multiagent.a2a.server.A2AServer.to_starlette_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_starlette_app</span><span class="p">()</span></code>

<a href="#strands.multiagent.a2a.server.A2AServer.to_starlette_app" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Create a Starlette application for serving this agent via HTTP.</p>
<p>Automatically handles path-based mounting if a mount path was derived
from the http_url parameter.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Starlette</code></td>            <td>
                  <code><span title="starlette.applications.Starlette">Starlette</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A Starlette application configured to serve this agent.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>strands/multiagent/a2a/server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_starlette_app</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Starlette</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a Starlette application for serving this agent via HTTP.</span>

<span class="sd">    Automatically handles path-based mounting if a mount path was derived</span>
<span class="sd">    from the http_url parameter.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Starlette: A Starlette application configured to serve this agent.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a2a_app</span> <span class="o">=</span> <span class="n">A2AStarletteApplication</span><span class="p">(</span><span class="n">agent_card</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">public_agent_card</span><span class="p">,</span> <span class="n">http_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_handler</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">:</span>
        <span class="c1"># Create parent app and mount the A2A app at the specified path</span>
        <span class="n">parent_app</span> <span class="o">=</span> <span class="n">Starlette</span><span class="p">()</span>
        <span class="n">parent_app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">,</span> <span class="n">a2a_app</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mounting A2A server at path: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mount_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parent_app</span>

    <span class="k">return</span> <span class="n">a2a_app</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>